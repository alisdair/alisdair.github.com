@import compass

+global-reset

$foreground-color: #222222
$background-color: #ffffff
$link-color:       #105dbc
$secondary-color:  #b9b39d
$highlight-color:  #ffffc8

$base-font-size: 20px
$base-line-height: 15px

$heading-font-sizes: 44px,28px,22px,18px,16px,16px

$grid-background-baseline-color:  rgba(0,0,0,0.05)
$grid-background-baseline-height: $base-line-height/$base-font-size * 1em 

+establish-baseline

@import fonts
@import syntax

// Post-specific stuff

#arm_immediate_encoding_form
  +clearfix
  max-width: 642px
  margin: 0 auto

  input, button
    +adjust-font-size-to($base-font-size)
    +box-sizing(border-box)
    -moz-appearance: none
    -webkit-appearance: none
    display: block
    font-family: "DejaVu Sans Mono", monospace
    border: 2px solid $foreground-color
    text-align: center
    width: 100%
    height: 40px
    margin: 0
    padding: 5px

  input.error
    color: #d22

  button
    cursor: pointer
    color: $background-color
    background: $link-color
    border: none
    &:hover
      background: lighten($link-color, 20%)

  .input
    margin: 5px 90px

  @media screen and (max-width: 400px)
    .input
      clear: both
      margin: 5px

  .button
    width: 40px
    margin: 5px 0
  .button_left
    float: left
  .button_right
    float: right

#decoded_bits
  rect
    fill: transparent
    &.span
      fill-opacity: 0.5
      fill: #7ED321
    &.error
      fill-opacity: 0.5
      fill: #E32E21

#encoder_output
  text-align: center
  font-family: "DejaVu Sans Mono", monospace
  &.error
    color: #d22

html
  +adjust-leading-to(2)
  margin: 0 1em
  background: $background-color
  // +debug-vertical-alignment
  font-family: "DejaVu Sans", sans-serif
  color: $foreground-color

@for $i from 1 through 6
  h#{$i}
    $font-size: nth($heading-font-sizes, $i)
    +adjust-font-size-to($font-size)
    +leader(2, $font-size)
    +trailer(1, $font-size)
    font-family: "Roboto Slab", sans-serif
    font-weight: bold

h1
  +trailer(2, nth($heading-font-sizes, 1))

p
  +trailer(2)

.footnote
  +adjust-font-size-to(12px)

#post, #about
  a
    color: $link-color
    text-decoration: none
    border-bottom: 1px dotted transparent
  a:visited
    color: darken($link-color, 10%)
    background: mix($link-color, $background-color, 0.5)
  &:hover a
    border-color: darken($background-color, 20%)
  a:hover
    color: mix($link-color, $background-color, 0.5)
    background: $link-color

#post
  .bookmarklet a
    +border-radius(1em)
    +box-shadow(0 0.25em 0.5em rgba(0,0,0,0.2))
    padding: rhythm(0.5) 1em
    border: none
    color: mix($link-color, $background-color, 0.5)
    background: $link-color

    &:hover
      +box-shadow(0 0.2em 0.5em rgba(0,0,0,0.2))
      position: relative
      top: 0.05em

  img, svg
    display: block
    margin: 0 auto
    max-width: 100%

  ul
    margin-left: 2em
    list-style-type: disc

#about
  max-width: 27em
  .photo-wrapper
    +transition-property(all)
    +transition-duration(200ms)
    position: absolute
    top: 0
    right: 0
    +border-radius(100%)
    border: 5px solid #bbb
    +box-sizing(border-box)
    width: 8em
    height: 8em
    background: url(/alisdair.jpg) no-repeat
    +background-size(100%)
    overflow: hidden
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/alisdair.jpg', sizingMethod='scale')
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/alisdair.jpg', sizingMethod='scale')"
    &:hover
      +rotate(5deg)
      border-color: #999
    img
      +opacity(0)
      width: 8em
      height: 8em

    &.post-photo
      width: 2.5em
      height: 2.5em
      border-width: 3px
      &:hover
        +rotate(0)
      img
        width: 2.5em
        height: 2.5em


p code
  background: $highlight-color

p a:hover code
  background: transparent

pre
  +trailer(2)
  +rhythm-borders(2px)
  background: lighten($foreground-color, 5%)
  border-color: mix($foreground-color, $background-color)
  color: $background-color
  overflow: auto

code
  font-family: "DejaVu Sans Mono", monospace
  font-weight: normal

blockquote
  color: lighten($foreground-color, 25%)
  border-left: 0.25em solid mix($foreground-color, $background-color, 25%)
  margin-left: 1.5em
  margin-right: 1.5em
  padding-left: 1em

em
  font-style: italic
strong
  font-weight: bold

em strong, strong em
  font-style: italic
  font-weight: bold

.bookmarklet
  text-align: center

#site
  width: 35em
  margin: 0 auto
  position: relative
  +leader(1)

#title
  @extend h1
  a
    font-family: "Roboto Slab"
    font-weight: normal
    color: $secondary-color
    text-decoration: none
    &:hover
      color: mix($secondary-color, $background-color)

#posts
  +leader(3)
  +trailer(2)

  time
    +leader(1)
    +transition-property(color, background)
    +transition-duration(150ms)
    display: block
    color: lighten($foreground-color, 30%)

  h1
    @extend h2
    +leader(0)
    +trailer(1, nth($heading-font-sizes, 2))

  p
    +trailer(1)

  a
    +transition-property(color, background)
    +transition-duration(150ms)
    +padding-leader(0.5)
    +padding-trailer(0.5)
    padding-left: 1em
    padding-right: 1em
    display: block
    color: $foreground-color
    text-decoration: none
    &:hover
      background: transparentize($secondary-color, 0.8)


#footer
  font-family: "DejaVu Sans"
  font-weight: normal
  font-style: normal
  overflow: auto
  +leader(6)
  +padding-trailer(2)
  a
    color: lighten($foreground-color, 40%)
    &:visited
      color: lighten($foreground-color, 60%)
    &:hover
      background: desaturate(lighten($link-color, 25%), 25%)
      color: mix($link-color, $background-color, 0.75)

  li
    width: 33%
    float: left
    text-align: center

  p
    text-align: center

@media screen and (max-width: 700px)
  $base-font-size: 16px
  $base-line-height: 12px
  +establish-baseline
  html
    -webkit-text-size-adjust: none
    +adjust-leading-to(2)
  #site
    width: 94%
  h1
    +adjust-font-size-to(30px)
    +trailer(2, 30px)
  #title
    +adjust-font-size-to(32px)
    +trailer(2, 32px)
  h2
    +adjust-font-size-to(24px)
    +leader(2, 24px)
    +trailer(1, 24px)
  #posts
    +leader(2)
    a
      +leader(0)
  #post pre
    +adjust-font-size-to(12px, 1.5)
    +leader(2, 12px)
    +trailer(2, 12px)
    +rhythm-borders(2px, 1, 12px)

  #about
    max-width: 100%
    .photo-wrapper
      width: 2.5em
      height: 2.5em
      border-width: 3px
      img
        width: 2.5em
        height: 2.5em

@media screen and (max-width: 400px)
  #title
    +adjust-font-size-to(24px)
    +trailer(2, 24px)
